/* Criando e abrindo Banco de dados Empresa */
CREATE SCHEMA EMPRESA;
USE EMPRESA;

/* Criando tabela Funcionario */
CREATE TABLE FUNCIONARIO (
Fun_ID INT NOT NULL,
Fun_Nome VARCHAR(45) NOT NULL,
Fun_CPF VARCHAR(11) NOT NULL UNIQUE,
Fun_DatNasc DATE NULL,
Fun_Endereco VARCHAR(45) NULL,
Fun_Sexo VARCHAR(1) NULL,
Fun_Salario DECIMAL(10,2) NULL,
Sup_ID INT NULL,

PRIMARY KEY(Fun_ID),

CONSTRAINT Fun_Sup_ID FOREIGN KEY (Sup_ID) REFERENCES FUNCIONARIO (Fun_ID),
CONSTRAINT Fun_Ck_Sexo CHECK (Fun_Sexo IN ('F','M'))
);

/* Criando a tabela Departamento */
CREATE TABLE DEPARTAMENTO (
Dep_ID INT NOT NULL,
Dep_Nome VARCHAR(45) NOT NULL,
Dep_DT_INI_Gerente DATE NULL,
Fun_ID_Supervisor INT NOT NULL,

PRIMARY KEY (Dep_ID),

CONSTRAINT Dep_Sup_ID FOREIGN KEY (Fun_ID_Supervisor) REFERENCES FUNCIONARIO (Fun_ID)
);

/* Criando a tabela Local_Dep */
CREATE TABLE LOCAL_DEP (
Dep_ID INT NOT NULL,
Loc_Nome VARCHAR(45) NOT NULL UNIQUE,

PRIMARY KEY (Dep_ID, Loc_Nome),

CONSTRAINT Loc_Sup_ID FOREIGN KEY (Dep_ID) REFERENCES DEPARTAMENTO (Dep_ID)
);

/* Criando a tabela Projeto */
CREATE TABLE PROJETO (
Prj_ID INT NOT NULL,
Prj_Nome VARCHAR(45) NOT NULL,
Prj_Local VARCHAR(45) NULL,
Dep_ID INT NOT NULL,

PRIMARY KEY (Prj_ID),

CONSTRAINT Prj_Dep_ID FOREIGN KEY (Dep_ID) REFERENCES DEPARTAMENTO (Dep_ID)
);
